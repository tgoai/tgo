# ==========================================================
# TGO Development Environment Configuration
# ==========================================================
# Copy this file to .env.dev and customize as needed:
#   cp .env.dev.example .env.dev
#
# This configuration is for local development with:
#   - Infrastructure (PostgreSQL, Redis, WuKongIM) running in Docker
#   - Backend services running locally with hot-reload
#   - Frontend services running locally with Vite HMR
# ==========================================================

# Environment
ENVIRONMENT=development
DEBUG=true

# ==========================================================
# Database Configuration (Docker)
# ==========================================================
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=tgo
POSTGRES_USER=tgo
POSTGRES_PASSWORD=tgo

# Database URL for services (async driver for FastAPI)
DATABASE_URL=postgresql+asyncpg://tgo:tgo@localhost:5432/tgo

# ==========================================================
# Redis Configuration (Docker)
# ==========================================================
REDIS_HOST=localhost
REDIS_PORT=6379

# Redis URLs for different services (different DBs)
REDIS_URL=redis://localhost:6379/0
# tgo-api uses DB 0
# tgo-ai uses DB 1
# tgo-rag, tgo-workflow use DB 2
# tgo-device-control uses DB 3

# ==========================================================
# Service Ports (Local Development)
# ==========================================================
# Backend Services
TGO_API_PORT=8000
TGO_AI_PORT=8081
TGO_RAG_PORT=8082
TGO_PLATFORM_PORT=8003
TGO_WORKFLOW_PORT=8004
TGO_PLUGIN_RUNTIME_PORT=8090
TGO_DEVICE_CONTROL_PORT=8085

# Frontend Services
TGO_WEB_PORT=5173
TGO_WIDGET_PORT=5174

# ==========================================================
# Internal Service URLs (for inter-service communication)
# ==========================================================
API_SERVICE_URL=http://localhost:8000
AI_SERVICE_URL=http://localhost:8081
RAG_SERVICE_URL=http://localhost:8082
PLATFORM_SERVICE_URL=http://localhost:8003
WORKFLOW_SERVICE_URL=http://localhost:8004
PLUGIN_RUNTIME_URL=http://localhost:8090
DEVICE_CONTROL_SERVICE_URL=http://localhost:8085

# ==========================================================
# WuKongIM Configuration (Docker)
# ==========================================================
WUKONGIM_SERVICE_URL=http://localhost:5001
WUKONGIM_ENABLED=true
WK_EXTERNAL_IP=127.0.0.1

# ==========================================================
# Platform Service Specific
# ==========================================================
API_BASE_URL=http://localhost:8000
DATABASE_URL=postgresql+asyncpg://tgo:tgo@localhost:5432/tgo
REDIS_URL=redis://localhost:6379/0

# ==========================================================
# Frontend Environment Variables
# ==========================================================
VITE_API_BASE_URL=http://localhost:8000
VITE_WIDGET_PREVIEW_URL=http://localhost:5174
VITE_WIDGET_SCRIPT_BASE=http://localhost:5174/tgo-widget-sdk.js
VITE_WIDGET_DEMO_URL=http://localhost:5174/demo.html
VITE_DEBUG_MODE=true

# ==========================================================
# Security
# ==========================================================
# Generate with: openssl rand -hex 32
SECRET_KEY=dev_secret_key_change_in_production_12345678901234567890

# Token expiration (7 days for development)
ACCESS_TOKEN_EXPIRE_MINUTES=10080

# ==========================================================
# Storage Configuration
# ==========================================================
STORAGE_TYPE=local

# ==========================================================
# Logging
# ==========================================================
LOG_LEVEL=DEBUG

# ==========================================================
# Store Service (Optional)
# ==========================================================
STORE_SERVICE_URL=https://store.tgo.ai
STORE_WEB_URL=https://store.tgo.ai
